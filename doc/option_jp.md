こちらはHalfcliffのオプションの部品用の資料です。(2021/12/31時点では作成中の資料です。作成完了、と書かれたもの以外は使用不可です。)

対応を予定しているオプションの部品は以下の通りです。
設計時の制約によっては、対応を断念する可能性もあります。
* (動作確認済。資料作成中)ロータリーエンコーダ
* (動作確認済。資料作成中)ビットトレードワン製トラックボール(ADTB7M)
* (条件付きで動作確認済。資料作成中)OLED
* (動作確認予定)BLE Micro Pro
* (設計予定)直交配列拡張基板
* (設計予定)英字配列風拡張基板


# ロータリーエンコーダ
基板のフットプリントに対応しているロータリーエンコーダが使用可能です。

実機にて動作確認済のものは以下の通りです。
* PEC12R-4222F-S0024(遊舎工房様等で購入可能)
* EC12E2430803(秋月電子様等で購入可能)

## 必要な部品の用意
以下の部品を用意します。

|名前|合計数|備考|
|:-|:-|:-|
|ロータリーエンコーダ|1個||
|ロータリーエンコーダ用ノブ|1個||

## 使用時の主な注意点
* 組立済みのキーボードにロータリーエンコーダ取付ける場合、取付け箇所のキースイッチを(はんだを除去して)取外す必要があります。
* ロータリーエンコーダのプッシュ機能には対応していません。
* ロータリーエンコーダ使用時は、対応するファームウェアの書込みが必要です。
* 操作時の動作を変更する際は、QMK MSYSまたはRemap、VIAを使用する必要があります。Remap、VIAを使用する場合、ロータリーエンコーダを取付けた列の一番上のキーは、ロータリーエンコーダを時計回り(反時計回りかも)に回転させたキーと同じになるので注意してください。
* (β版のみ)ロータリーエンコーダ取付け時に端子とトッププレートが干渉する場合、端子の位置や角度を干渉しないように調整するか、トッププレートの干渉部分を削る必要があります。

## 取付け方法

以下編集中です。

おおまかな作業順序
* (キースイッチはんだ付け済みの場合)ロータリーエンコーダ取付箇所のキースイッチの取外し
* ロータリーエンコーダの取付、はんだ付け(β版は注意点有り)
* (QMK Toolboxを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み
* (QMK MSYSを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み

## (キースイッチはんだ付け済みの場合)ロータリーエンコーダ取付箇所のキースイッチの取外し
ロータリーエンコーダ取付箇所(左右ともに、一番内側の、上から4番目のキーの位置)

にキースイッチがある場合は(はんだを除去して)取外します。ない場合はこの手順は飛ばします。

まずは取付を行うキーボードを裏返し、キースイッチ基板、拡張基板をボトムプレートに固定しているねじを取外します。

左キーボードのねじ取外し箇所(黄丸で示したねじを取外します。右の場合も同じイメージです。)
![ねじ取外し_ロータリーエンコーダ取付時](https://user-images.githubusercontent.com/54104281/147803209-2badeb80-8cf0-4f1e-b8aa-3da6823bc07c.jpg)

ねじを取外したら、キースイッチ基板と拡張基板をProMicro基板の反対方向にスライドさせて取外します。この時、ProMicro基板とキースイッチ基板を接続しているピンになるべく負荷をかけないよう注意します。

左キーボードの取外しのイメージ(水色の矢印の向きにスライドさせます。右の場合は逆です。)

![キースイッチ基板取外し_ロータリーエンコーダ取付時](https://user-images.githubusercontent.com/54104281/147803508-5d07b866-d666-4027-957a-6e8e78c8a807.jpg)

取外し後、ロータリーエンコーダ取付箇所のキースイッチのはんだをはんだ吸取機等で取り除き、取外します。

左キーボードでの取外し箇所(黄丸の部分のはんだを除去し、キースイッチを取外します。右の場合は逆のイメージです。)

![キースイッチ取外し箇所](https://user-images.githubusercontent.com/54104281/147863916-c1e1fa41-1d0b-49c7-9cdb-72b9cdd6c1cd.jpg)

## ロータリーエンコーダの取付、はんだ付け(β版の場合注意点有り)

ロータリーエンコーダを取付け、はんだ付けします。はんだ付けを行う箇所は画像の黄枠の部分です。(水色枠の部分は任意です。)
![ロータリーエンコーダ用はんだ付け箇所](https://user-images.githubusercontent.com/54104281/147804958-0f9afd54-6870-4564-af59-4ebcd15293b7.jpg)

(β版の場合)画像の様に、ロータリーエンコーダの端子(特に端子が3本ある方)とトッププレートが干渉することがあります。
![IMG_20211231_114421](https://user-images.githubusercontent.com/54104281/147805201-d71d5d3c-9593-4917-ab5e-da8666b10da4.jpg)

その場合、トッププレートの干渉部分を削るか、ロータリーエンコーダの端子を下の画像の様に(半分より下を外側に広げるように)曲げて取付けます。
![IMG_20211231_114809](https://user-images.githubusercontent.com/54104281/147805239-43c1a04e-c385-49d7-8418-a9d8683d9750.jpg)

取付後の画像(一部キースイッチとキーキャップを取外しています。)
![IMG_20211231_115656](https://user-images.githubusercontent.com/54104281/147805345-7c1e50f9-cc71-4174-a2e9-f4177c6a7ef3.jpg)

## (QMK Toolboxを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み
キーボード組立時に行った
[入力動作テスト](https://github.com/N2-Sumikko/HalfCliff/blob/master/doc/Oparation_test_jp.md)
の内容を参考に、QMK ToolboxにてHexファイルを書込みます。
2021/12/31時点で使用可能なHexファイルは以下の通りです。
|フォルダ|ファイル名|概要|
|:-|:-|:-|
|hex/qmk_0.15.4/via/others/(unofficial)oled_encoder_trackball_mousekey/|halfcliff_via.hex|OLED、ロータリーエンコーダ、トラックボール併用時。エンコーダの機能はVIA、Remapにて変更可能|
|hex/qmk_0.15.4/via/others/(unofficial)encoder/|halfcliff_via.hex|ロータリーエンコーダ使用時。エンコーダの機能はVIA、Remapにて変更可能|
## (QMK MSYSを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み
編集中です。



# ビットトレードワン製トラックボール(ADTB7M)

のぎけす屋様のトラックボールモジュール用レベル変換基板の使用により、ビットトレードワン製トラックボール(ADTB7M)が使用可能です。

## 必要な部品の用意
以下の部品を用意します。
|名前|合計数|備考|
|:-|:-|:-|
|7mmオプティカルトラックボールモジュール１uタイプ|1個|ビット・トレード・ワン様のトラックボールモジュール(型番：ADTB7M)です。以下、トラックボールモジュールと呼びます。|
|トラックボールモジュール用レベル変換基板|1個|のぎけす屋様のトラックボールモジュール用レベル変換基板です。以下、変換基板と呼びます。|
|トラックボールモジュール取付用キット|1個|トラックボールモジュール固定用プレート、M2x10mmねじ、M2x4mmスペーサ2個、M2x6mmピンヘッダ1x4等が同梱されたキットです。|

トラックボールモジュール、変換基板は遊舎工房様の実店舗、[通販サイト](https://yushakobo.jp/shop/)等で購入可能です。
トラックボールモジュール取付用キットは販売予定です。

## 使用時の主な注意点
* キーボード組立時にキースイッチ基板にロープロファイルピンソケット1x4をはんだ付けしていない場合、トラックボールモジュールの取付は基本的に不可となります。ご注意ください。
　(不可能ではないですが、ピンがとても長いピンヘッダを使用するなど、特殊な取付方法が必要となります。今度一回試してみます。）
* トラックボールモジュールの配線を変換基板にはんだ付けする際は、変換基板の向きにご注意ください。
* トラックボールモジュール用レベル変換基板にピンヘッダ1x4をはんだ付けする際は、変換基板の向きと端子の位置にご注意ください。(変換基板のNC端子は使用しません。)
* アクリル製の部品にスペーサーの取付けやねじ止めをする際は、強い力をかけると破損の恐れがあるのでご注意ください。
* トラックボールを使用する場合、対応するファームウェアの書込みが必要です。
* トラックボールとロータリーエンコーダの併用時にロータリーエンコーダ操作時の動作を変更する場合、ファームウェアをコンパイルできる環境が必要です。
## 取付け方法

以下編集中です。

おおまかな作業順序
* (キースイッチはんだ付け済みの場合)トラックボールモジュール取付箇所のキースイッチの取外し
* 変換基板へのトラックボールモジュール配線、ピンヘッダ1x4のはんだ付け
* トラックボールモジュール用ボトムプレートの穴へ変換基板を通す
* ロープロファイルピンソケット1x4へはんだ付けしたピンヘッダ1x4を取付
* トッププレートにM2x4㎜スペーサー2つをM2x8mmねじ2本で取付
* トラックボールモジュールの配線位置を調整しながら、M2x8mmねじへトラックボールモジュール用ボトムプレートの穴を通す
* トラックボールモジュール用ボトムプレートにM2x6mmスペーサの取付
* トラックボールモジュールの位置を調整しながら、M2x6mmスペーサにトラックボールモジュール用トッププレートをM2x4mmねじにて固定
* (QMK Toolboxを使用する場合)トラックボールモジュール用のHexファイルの書込み
* (QMK MSYSを使用する場合。ちょっと大変)トラックボールモジュール対応のファームウェアの書込み

トラックボールモジュール対応のファームウェアの内容に関しては、[こちら](https://github.com/sekigon-gonnoc/qmk_firmware/tree/dev/ble_micro_pro/keyboards/helix/rev2/keymaps/bto_tb)のせきごん様のリンクもご参考ください。

以下、編集用の情報です。現時点では参考にしないでください。

## (キースイッチはんだ付け済みの場合)トラックボールモジュール取付箇所のキースイッチの取外し

## 変換基板へのトラックボールモジュール配線、ピンヘッダ1x4のはんだ付け

画像のように、変換基板へトラックボールモジュールの配線と、ピンヘッダ1x4をはんだ付けします。各部品の向きに注意して下さい。

言葉で説明すると、トラックボールモジュールの配線を自分の方に向け、変換基板の部品がある面を下、かつ部品が無い面の文字を正しい向きにした状態で、部品が無い面からある面へ配線を通します。その後、部品がある面の四角いパッドにそれぞれの配線をはんだ付けします。

ピンヘッダについては、ピンヘッダの短い方が変換基板側、、かつピンヘッダの樹脂部分が変換基板の部品がある面に来るようにはんだ付けします。

<img width="600" alt="トラックボールモジュールはんだ付け後" src="https://user-images.githubusercontent.com/54104281/91305293-cbbe6100-e7e5-11ea-8909-9be420a13905.png">

## トラックボールモジュール用ボトムプレートの穴へ変換基板を通す

ある場合は、トラックボールモジュール用ボトムプレートの保護シートをはがします。

その後、画像の様に、トラックボールモジュール用ボトムプレートの穴へ、トラックボールモジュールの配線を通します。

(通した後の画像)

## ロープロファイルピンソケット1x4へはんだ付けしたピンヘッダ1x4を取付
## トッププレートにM2x4㎜スペーサー2つをM2x8mmねじ2本で取付
画像の様に、トッププレートのUの形の切り欠きの部分2箇所に、M2x8mmねじ2本でM2x4㎜スペーサー2つを取付けます。

(取付後の画像)
## トラックボールモジュールの配線位置を調整しながら、M2x8mmねじへトラックボールモジュール用ボトムプレートの穴を通す
## トラックボールモジュール用ボトムプレートにM2x6mmスペーサの取付
## トラックボールモジュールの位置を調整しながら、M2x6mmスペーサにトラックボールモジュール用トッププレートをM2x4mmねじにて固定
## (QMK Toolboxを使用する場合)トラックボールモジュール用のHexファイルの書込み
## (QMK MSYSを使用する場合。ちょっと大変)トラックボールモジュール対応のファームウェアの書込み

# OLED
以下編集中です。
















 







