こちらはHalfcliffのオプションの部品用の資料です。(2021/12/31時点では作成中の資料です。作成完了、と書かれたもの以外は使用不可です。)

対応を予定しているオプションの部品は以下の通りです。
設計時の制約によっては、対応を断念する可能性もあります。
* (動作確認済。資料作成中)ロータリーエンコーダ
* (動作確認済。資料作成中)ビットトレードワン製トラックボール(ADTB7M)
* (条件付きで動作確認済。資料作成中)OLED
* (動作確認予定)BLE Micro Pro
* (設計予定)直交配列拡張基板
* (設計予定)英字配列風拡張基板


# ロータリーエンコーダ
基板のフットプリントに対応しているロータリーエンコーダが使用可能です。

実機にて動作確認済のものは以下の通りです。
* PEC12R-4222F-S0024(遊舎工房様等で購入可能)
* EC12E2430803(秋月電子様等で購入可能)

## 必要な部品の用意
以下の部品を用意します。

|名前|合計数|備考|
|:-|:-|:-|
|ロータリーエンコーダ|1個||
|ロータリーエンコーダ用ノブ|1個||

## 使用時の主な注意点
* 組立済みのキーボードにロータリーエンコーダ取付ける場合、取付け箇所のキースイッチを(はんだを除去して)取外す必要があります。
* ロータリーエンコーダのプッシュ機能には対応していません。
* ロータリーエンコーダ使用時は、対応するファームウェアの書込みが必要です。
* 操作時の動作を変更する際は、QMK MSYSまたはRemap、VIAを使用する必要があります。Remap、VIAを使用する場合、ロータリーエンコーダを取付けた列の一番上のキーは、ロータリーエンコーダを時計回りに回転させたキーと同じになるので注意してください。
* (β版のみ)ロータリーエンコーダ取付け時に端子とトッププレートが干渉する場合、端子の位置や角度を干渉しないように調整するか、トッププレートの干渉部分を削る必要があります。

## 取付け方法

おおまかな作業順序
* (キースイッチはんだ付け済みの場合)ロータリーエンコーダ取付箇所のキースイッチの取外し
* ロータリーエンコーダの取付、はんだ付け(β版は注意点有り)
* (QMK Toolboxを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み
* (QMK MSYSを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み

## (キースイッチはんだ付け済みの場合)ロータリーエンコーダ取付箇所のキースイッチの取外し
ロータリーエンコーダ取付箇所(左右ともに、一番内側の、上から4番目のキーの位置)

にキースイッチがある場合は(はんだを除去して)取外します。ない場合はこの手順は飛ばします。

まずは取付を行うキーボードを裏返し、キースイッチ基板、拡張基板をボトムプレートに固定しているねじを取外します。

左キーボードのねじ取外し箇所(黄丸で示したねじを取外します。右の場合も同じイメージです。)
![ねじ取外し_ロータリーエンコーダ取付時](https://user-images.githubusercontent.com/54104281/147803209-2badeb80-8cf0-4f1e-b8aa-3da6823bc07c.jpg)

ねじを取外したら、キースイッチ基板と拡張基板をProMicro基板の反対方向にスライドさせて取外します。この時、ProMicro基板とキースイッチ基板を接続しているピンになるべく負荷をかけないよう注意します。

左キーボードの取外しのイメージ(水色の矢印の向きにスライドさせます。右の場合は逆です。)

![キースイッチ基板取外し_ロータリーエンコーダ取付時](https://user-images.githubusercontent.com/54104281/147803508-5d07b866-d666-4027-957a-6e8e78c8a807.jpg)

取外し後、ロータリーエンコーダ取付箇所のキースイッチのはんだをはんだ吸取機等で取り除き、取外します。

左キーボードでの取外し箇所(黄丸の部分のはんだを除去し、キースイッチを取外します。右の場合は逆のイメージです。)

![キースイッチ取外し箇所](https://user-images.githubusercontent.com/54104281/147863916-c1e1fa41-1d0b-49c7-9cdb-72b9cdd6c1cd.jpg)

## ロータリーエンコーダの取付、はんだ付け(β版の場合注意点有り)

ロータリーエンコーダを取付け、はんだ付けします。はんだ付けを行う箇所は画像の黄枠の部分です。(水色枠の部分は任意です。)
![ロータリーエンコーダ用はんだ付け箇所](https://user-images.githubusercontent.com/54104281/147804958-0f9afd54-6870-4564-af59-4ebcd15293b7.jpg)

(β版の場合)画像の様に、ロータリーエンコーダの端子(特に端子が3本ある方)とトッププレートが干渉することがあります。
![IMG_20211231_114421](https://user-images.githubusercontent.com/54104281/147805201-d71d5d3c-9593-4917-ab5e-da8666b10da4.jpg)

その場合、トッププレートの干渉部分を削るか、ロータリーエンコーダの端子を下の画像の様に(半分より下を外側に広げるように)曲げて取付けます。
![IMG_20211231_114809](https://user-images.githubusercontent.com/54104281/147805239-43c1a04e-c385-49d7-8418-a9d8683d9750.jpg)

取付後の画像(一部キースイッチとキーキャップを取外しています。)
![IMG_20211231_115656](https://user-images.githubusercontent.com/54104281/147805345-7c1e50f9-cc71-4174-a2e9-f4177c6a7ef3.jpg)

## キースイッチ基板、拡張基板の再取付

取外しとは逆の手順で、キースイッチ基板のピンヘッダをProMicro基板のピンソケットへ取付け、キースイッチ基板と拡張基板をボトムプレートへねじ止めします。

取付後、キースイッチ基板とボトムプレートを接続しているジャンパピンの取付状態を確認します。外れたり抜けかかっている場合は、再度取付けます。
## (QMK Toolboxを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み
キーボード組立時に行った
[入力動作テスト](https://github.com/N2-Sumikko/HalfCliff/blob/master/doc/Oparation_test_jp.md)
の内容を参考に、QMK ToolboxにてHexファイルを書込みます。

2021/12/31時点で使用可能なHexファイルは以下の通りです。

(unofficial)と記載されているものは、QMKにマージされたファームウェアを変更して作成したものです。
|フォルダ|ファイル名|概要|
|:-|:-|:-|
|hex/qmk_0.15.4/via/others/(unofficial)oled_encoder_trackball_mousekey/|halfcliff_via.hex|OLED、ロータリーエンコーダ、トラックボール併用時用です。エンコーダの機能はVIA、Remapにて変更可能です。|
|hex/qmk_0.15.4/via/others/(unofficial)encoder/|halfcliff_via.hex|ロータリーエンコーダ使用時。エンコーダの機能はVIA、Remapにて変更可能です。用意する予定です。|
## (QMK MSYSを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み
編集中です。

# ビットトレードワン製トラックボール(ADTB7M)
のぎけす屋様のトラックボールモジュール用レベル変換基板の使用により、ビットトレードワン製トラックボール(ADTB7M)が使用可能です。

## 必要な部品の用意
以下の部品を用意します。
|名前|合計数|備考|
|:-|:-|:-|
|7mmオプティカルトラックボールモジュール１uタイプ|1個|ビット・トレード・ワン様のトラックボールモジュール(型番：ADTB7M)です。以下、トラックボールモジュールと呼びます。|
|トラックボールモジュール用レベル変換基板|1個|のぎけす屋様のトラックボールモジュール用レベル変換基板です。以下、変換基板と呼びます。|
|トラックボールモジュール用トッププレート|1個|トラックボールモジュール取付用キットに同梱の部品です。|
|トラックボールモジュール用ボトムプレート|1個|トラックボールモジュール取付用キットに同梱の部品です。|
|M2x6mmスペーサー|2本|トラックボールモジュール取付用キットに同梱の部品です。|
|M2x4mmスペーサー|2本|トラックボールモジュール取付用キットに同梱の部品です。|
|M2x10mmねじ|2本|トラックボールモジュール取付用キットに同梱の部品です。|
|M2x4mmねじ|2本|トラックボールモジュール取付用キットに同梱の部品です。|

トラックボールモジュール、変換基板は遊舎工房様の実店舗、[通販サイト](https://yushakobo.jp/shop/)等で購入可能です。
トラックボールモジュール取付用キットは販売予定です。

## 使用時の主な注意点
* キーボード組立時にキースイッチ基板にロープロファイルピンソケット1x4をはんだ付けしていない場合、トラックボールモジュールの取付は基本的に不可です。ご注意ください。
　(完全に不可能ではありませんが、とても長いピンヘッダを使用するなど、特殊な取付方法が必要です。試したら追記します。）
* トラックボールモジュールの配線及びピンヘッダを変換基板にはんだ付けする際は、各部品の向きにご注意ください。
* アクリル製の部品にスペーサーの取付けやねじ止めをする際は、強い力をかけると破損の恐れがあるのでご注意ください。
* トラックボールを使用する場合、対応するファームウェアの書込みが必要です。
* 右キーボードにトラックボールを取付ける場合、対応するファームウェア(右キーボードのProMicroにUSBケーブルを接続して正しく動作するファームウェア)の書込みが必要です。

## 取付け方法

おおまかな作業順序
* (キースイッチはんだ付け済みの場合)トラックボールモジュール取付箇所のキースイッチの取外し
* 変換基板へのトラックボールモジュール配線、ピンヘッダ1x4のはんだ付け
* トラックボールモジュールの配線を、トラックボールモジュール用ボトムプレートの穴へ通す
* ロープロファイルピンソケット1x4へはんだ付けしたピンヘッダ1x4を取付
* トッププレートにM2x4㎜スペーサー2つをM2x10mmねじ2本で取付
* トラックボールモジュールの配線位置を調整しながら、M2x10mmねじへトラックボールモジュール用ボトムプレートの穴を通す
* トラックボールモジュール用ボトムプレートにM2x6mmスペーサの取付
* トラックボールモジュールの位置を調整しながら、M2x6mmスペーサにトラックボールモジュール用トッププレートをM2x4mmねじにて固定
* (QMK Toolboxを使用する場合)トラックボールモジュール用のHexファイルの書込み
* (QMK MSYSを使用する場合。ちょっと大変)トラックボールモジュール対応のファームウェアの書込み

トラックボールモジュール対応のファームウェアの内容に関しては、[こちら](https://github.com/sekigon-gonnoc/qmk_firmware/tree/dev/ble_micro_pro/keyboards/helix/rev2/keymaps/bto_tb)のせきごん様のリンクもご参考ください。

以下、編集用の情報です。現時点では参考にしないでください。

## (キースイッチはんだ付け済みの場合)トラックボールモジュール取付箇所のキースイッチの取外し

トラックボール取付箇所(左右ともに、一番内側の、一番上のキーの位置)

にキースイッチがある場合は(はんだを除去して)取外します。ない場合はこの手順は飛ばします。

まずは取付を行うキーボードを裏返し、キースイッチ基板、拡張基板をボトムプレートに固定しているねじを取外します。

左キーボードのねじ取外し箇所(黄丸で示したねじを取外します。右の場合も同じイメージです。)
![ねじ取外し_ロータリーエンコーダ取付時](https://user-images.githubusercontent.com/54104281/147803209-2badeb80-8cf0-4f1e-b8aa-3da6823bc07c.jpg)

ねじを取外したら、キースイッチ基板と拡張基板をProMicro基板の反対方向にスライドさせて取外します。この時、ProMicro基板とキースイッチ基板を接続しているピンになるべく負荷をかけないよう注意します。

左キーボードの取外しのイメージ(水色の矢印の向きにスライドさせます。右の場合は逆です。)

![キースイッチ基板取外し_ロータリーエンコーダ取付時](https://user-images.githubusercontent.com/54104281/147803508-5d07b866-d666-4027-957a-6e8e78c8a807.jpg)

取外し後、トラックボールモジュール取付箇所のキースイッチのはんだをはんだ吸取機等で取り除き、取外します。

左キーボードでの取外し箇所(黄丸の部分のはんだを除去し、キースイッチを取外します。右の場合は逆のイメージです。)

![トラックボール取付時のキースイッチ取外し箇所](https://user-images.githubusercontent.com/54104281/147865254-d339629d-2fd9-4b61-a3b8-4ae9cbc31fa6.jpg)


## 変換基板へのトラックボールモジュール配線、ピンヘッダ1x4のはんだ付け

画像のように、変換基板へトラックボールモジュールの配線と、ピンヘッダ1x4をはんだ付けします。各部品の向きに注意して下さい。

言葉で説明すると、トラックボールモジュールの配線を自分の方に向け、変換基板の部品がある面を下、かつ部品が無い面の文字を正しい向きにした状態で、部品が無い面からある面へ配線を通します。その後、部品がある面の四角いパッドにそれぞれの配線をはんだ付けします。

ピンヘッダ1x4については、ピンヘッダの短い方が変換基板側、、かつピンヘッダの樹脂部分が変換基板の部品がある面に来るようにして、変換基板のNC端子以外にピンヘッダを取付けてはんだ付けします。(四角の端子にピンヘッダがはんだ付けされていればOKです。)

![IMG_20211231_115737](https://user-images.githubusercontent.com/54104281/147865297-b79851ec-08da-475a-9446-2f6b6e2ec99f.jpg)

変換基板を裏返した写真(四角いパッドへのはんだ付け参考用)
![IMG_20211231_115751](https://user-images.githubusercontent.com/54104281/147865464-faa21119-564d-425d-b3fb-cfcbe405e169.jpg)

## トラックボールモジュール用ボトムプレートの穴へ変換基板を通す

ある場合は、トラックボールモジュール用ボトムプレートの保護シートをはがします。

その後、画像の様に、トラックボールモジュール用ボトムプレートの穴へ、トラックボールモジュールの配線を通します。

![IMG_20211231_115819](https://user-images.githubusercontent.com/54104281/147865483-5b4d7f89-a75e-4778-b0e1-363721fbad8f.jpg)

## トッププレートにM2x4㎜スペーサー2つをM2x10mmねじ2本で取付
画像の様に、トッププレートのU字の切り欠き2箇所に、M2x10mmねじ2本でM2x4㎜スペーサー2つを取付けます。

![IMG_20211231_120054](https://user-images.githubusercontent.com/54104281/147865631-08b4c85d-45a2-45e0-a6f7-96166fbead41.jpg)

## ロープロファイルピンソケット1x4へはんだ付けしたピンヘッダ1x4を取付

画像の様に、キースイッチ基板のロープロファイルピンヘッダ1x4に、キースイッチ基板のトッププレートを介してピンヘッダ1x4を取付けます。

![IMG_20211231_120134](https://user-images.githubusercontent.com/54104281/147865642-2da5ce9a-ed5a-4326-b632-12dbd91495d4.jpg)



## トラックボールモジュールの配線位置を調整しながら、M2x10mmねじへトラックボールモジュール用ボトムプレートの穴を通す

![IMG_20211231_120155](https://user-images.githubusercontent.com/54104281/147865657-e1efcedc-9015-473e-b925-192185e8914f.jpg)

## トラックボールモジュールの配線位置を調整して、トラックボールモジュール用ボトムプレートの上にトラックボールモジュールを置けるようにする

画像を参考にトラックボールモジュールの配線位置を調整して、ボトムプレートの上にトラックボールモジュールを置けるようにします。
![IMG_20211231_120332](https://user-images.githubusercontent.com/54104281/147865684-efcc6395-6c72-48b3-ab6a-759d730ce540.jpg)

## トラックボールモジュール用ボトムプレートにM2x6mmスペーサ2つの取付

![IMG_20211231_120557](https://user-images.githubusercontent.com/54104281/147865698-efa2ceec-5e1c-4a56-aecc-5aebc226503a.jpg)

## トラックボールモジュールの位置を調整しながら、M2x6mmスペーサ2つにトラックボールモジュール用トッププレートをM2x4mmねじ2本で固定

![IMG_20211231_120655](https://user-images.githubusercontent.com/54104281/147865706-7704bf9e-548d-4017-83ac-65e934809677.jpg)

## (QMK Toolboxを使用する場合)トラックボールモジュール用のHexファイルの書込み
## (QMK MSYSを使用する場合。ちょっと大変)トラックボールモジュール対応のファームウェアの書込み
追記予定です。

# OLED
以下編集中です。
















 







