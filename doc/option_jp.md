こちらはHalfcliffのオプションの部品用の資料です。(2021/08/08時点では作成中の資料です。完成まで使用しないでください。)

対応を予定しているオプションの部品は以下の通りです。
設計時の制約によっては、対応を断念する可能性もあります。
* (動作確認済。資料作成中)ロータリーエンコーダ
* (動作確認済。資料作成中)ビットトレードワン製トラックボール(ADTB7M)
* (条件付きで動作確認済。資料作成中)OLED
* (動作確認予定)BLE Micro Pro
* (設計予定)直交配列拡張基板
* (設計予定)英字配列風拡張基板


# ロータリーエンコーダ
基板のフットプリントに対応しているロータリーエンコーダが使用可能です。
実際に動作確認済のロータリーエンコーダは以下の通りです。
* PEC12R-4222F-S0024(遊舎工房様等で購入可能)
* EC12E2430803(秋月電子様等で購入可能)

## 必要な部品の用意
以下の部品を用意します。

|名前|合計数|備考|
|:-|:-|:-|
|ロータリーエンコーダ|1個||
|ロータリーエンコーダ用ノブ|1個||

## 使用時の主な注意点
* 組立済みのキーボードにロータリーエンコーダを取付ける場合、取付け箇所のキースイッチの取外し(はんだの除去)が必要です。
* β版にて組立済みのキーボードにロータリーエンコーダを取付ける場合、端子の位置や角度をトッププレートと干渉しないよう調整するか、トッププレートの干渉部分を削る必要があります。
* ロータリーエンコーダを使用する場合、対応するファームウェアの書込みが必要です。
* ロータリーエンコーダ操作時の動作を変更する場合、QMK MSYS、またはRemapを使用する必要があります。Remapを使用する場合、ロータリーエンコーダを実行した列の一番上のキーは、ロータリーエンコーダを時計回り(反時計回りかも)に回転させたキーと同じになるので注意してください。


## 取付け方法

以下編集中です。

おおまかな作業順序
* (キースイッチはんだ付け済みの場合)ロータリーエンコーダ取付箇所のキースイッチの取外し
* ロータリーエンコーダの取付、はんだ付け
* (QMK Toolboxを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み
* (QMK MSYSを使用する場合)ロータリーエンコーダ対応のファームウェアの書込み

# ビットトレードワン製トラックボール(ADTB7M)

のぎけす屋様のトラックボールモジュール用レベル変換基板を使用することで、ビットトレードワン製トラックボール(ADTB7M)が使用可能です。

## 必要な部品の用意
以下の部品を用意します。
|名前|合計数|備考|
|:-|:-|:-|
|7mmオプティカルトラックボールモジュール１uタイプ|1個|ビット・トレード・ワン様のトラックボールモジュール(型番：ADTB7M)です。以下、トラックボールモジュールと呼びます。|
|トラックボールモジュール用レベル変換基板|1個|のぎけす屋様のトラックボールモジュール用レベル変換基板です。以下、変換基板と呼びます。|
|トラックボールモジュール取付用キット|1個|トラックボールモジュール固定用プレート、ねじ、スペーサ、ピンヘッダ1x4等が同梱されたキットです。|

いずれも遊舎工房様の実店舗、[通販サイト](https://yushakobo.jp/shop/)等で購入可能です。

## 使用時の主な注意点
* キーボード組立時にロープロファイルピンソケット1x4をはんだ付けしていない場合、トラックボールモジュールの取付は基本的に不可となります。ご注意ください。
　(不可能ではないですが、ピンがとても長いピンヘッダを使用するなど、特殊な取付方法が必要となります。今度一回試してみます。）
* トラックボールモジュールの配線を変換基板にはんだ付けする際は、変換基板の向きにご注意ください。
* トラックボールモジュール用レベル変換基板にピンヘッダ1x4をはんだ付けする際は、変換基板の向きと端子の位置にご注意ください。(変換基板のNC端子は使用しません。)
* アクリル製の部品にスペーサーの取付けやねじ止めをする際は、強い力をかけると破損の恐れがあるのでご注意ください。
* トラックボールを使用する場合、対応するファームウェアの書込みが必要です。
* トラックボールとロータリーエンコーダの併用時にロータリーエンコーダ操作時の動作を変更する場合、ファームウェアをコンパイルできる環境が必要です。
## 取付け方法

以下編集中です。

おおまかな作業順序
* (キースイッチはんだ付け済みの場合)トラックボールモジュール取付箇所のキースイッチの取外し
* 変換基板へのトラックボールモジュール配線のはんだ付け
* 変換基板へのピンヘッダ1x4のはんだ付け
* トラックボールモジュール用ボトムプレートの穴へ変換基板を通す
* ロープロファイルピンソケット1x4へはんだ付けしたピンヘッダ1x4を取付
* トッププレートにM2x8mmねじにてM2x4㎜スペーサーを取付
* 変換基板の配線位置を調整しながら、M2x8mmねじへトラックボールモジュール用ボトムプレートの穴を通す
* トラックボールモジュール用ボトムプレートにM2x6mmスペーサの取付
* トラックボールモジュールの位置を調整しながら、M2x6mmスペーサにトラックボールモジュール用トッププレートをM2x4mmねじにて固定
* (QMK Toolboxを使用する場合)トラックボールモジュール対応のファームウェアの書込み
* (QMK MSYSを使用する場合。ちょっと大変)トラックボールモジュール対応のファームウェアの書込み

トラックボールモジュール対応のファームウェアの内容に関しては、[こちら](https://github.com/sekigon-gonnoc/qmk_firmware/tree/dev/ble_micro_pro/keyboards/helix/rev2/keymaps/bto_tb)のせきごん様のリンクをご参考ください。

以下、編集用の情報です。現時点では参考にしないでください。

## M2x4mmスペーサーの取付け

画像の様に、M2x10mmのねじ2本にM2x4mmスペーサーをそれぞれ取付けます。取付時のトルクは、スペーサーを回転させたときにねじが回らない位の強さならOKです。

取付時にProMicroが邪魔な場合は取り外しておきます。(画像では取外しています。）

<img width="600" alt="M2x4mmスペーサー取付後" src="https://user-images.githubusercontent.com/54104281/91306243-3a4fee80-e7e7-11ea-8e93-1f15521a5445.png">

上側のスペーサーは、ねじの頭を爪楊枝等の細い棒で抑えながら取付けると良いです。

下側のスペーサーは、一度ボトムプレートを取り外した後に、基板側から精密ドライバーでねじの頭を抑えながら取付ると良いです。

# 変換基板へのトラックボールモジュール配線のはんだ付け

画像のように、変換基板へトラックボールモジュールの配線をはんだ付けします。変換基板の向きに注意して下さい。

<img width="600" alt="トラックボールモジュールはんだ付け後" src="https://user-images.githubusercontent.com/54104281/91305293-cbbe6100-e7e5-11ea-8909-9be420a13905.png">

# 変換基板へのピンヘッダ1x4のはんだ付け

画像のように、変換基板へピンヘッダ1x4を取付け、はんだ付けします。短い端子が変換基板側です。変換基板のNC端子にはピンヘッダは取付けないので注意して下さい。

<img width="600" alt="トラックボールモジュールはんだ付け後" src="https://user-images.githubusercontent.com/54104281/91305293-cbbe6100-e7e5-11ea-8909-9be420a13905.png">

# トラックボールモジュール用ボトムプレートの穴へ変換基板を通す

トラックボールモジュール用ボトムプレートの保護シートをはがします。

その後、画像の様に、トラックボールモジュール用ボトムプレートの穴へ変換基板を通します。

<img width="600" alt="ボトムプレートを通した後" src="https://user-images.githubusercontent.com/54104281/91305689-5b640f80-e7e6-11ea-8e0c-bafee7e9d773.png">

# ピンヘッダ1x4のロープロファイルピンソケット1x4へ取付け

画像の様に、変換基板へはんだ付けしたピンヘッダ1x4を、左キーボード上のロープロファイルピンソケット1x4に、トッププレートを介して取付けます。

併せて、トラックボールモジュール用ボトムプレートの穴にM2x10mmねじを通します。

<img width="600" alt="変換基板とボトムプレートの取付け" src="https://user-images.githubusercontent.com/54104281/91306450-7a16d600-e7e7-11ea-85ba-e7218d811549.png">

# M2x10mmねじへのM2x6㎜スペーサーの取付け

画像の様に、Mx10mmねじ2本へM2x6mmスペーサーをそれぞれ取付けます。

<img width="600" alt="M2x6mmスペーサー取付後" src="https://user-images.githubusercontent.com/54104281/91307003-599b4b80-e7e8-11ea-9605-d9da47bc1eea.png">

# OLED(及びProMicro）の取付け

(取り外している場合は、ProMicroをメイン基板に取り付けた後に）OLEDをメイン基板へ取付けます。

# トラックボールモジュールの配線位置の調整

画像を参考に、トラックボールモジュールの配線を、左キーボードのトッププレートやトラックボールモジュール用ボトムプレートの穴へ通し、トラックボールモジュールをボトムプレートの上に置けるようにします。

<img width="600" alt="配線格納後" src="https://user-images.githubusercontent.com/54104281/91307590-1ee5e300-e7e9-11ea-9a7f-67cc21f7bb30.png">

# トッププレートへの保護テープ貼付け

トッププレートの保護シールをはがした後、画像の様にトッププレートの丸穴に2mm幅の保護テープを貼付けます。

<img width="600" alt="保護テープ貼付後" src="https://user-images.githubusercontent.com/54104281/91308053-b3504580-e7e9-11ea-931b-20db6c12d1d4.png">

保護テープを貼る目的は、丸穴のエッジを触らないようにするためと、トラックボールモジュールの固定のためです。

保護テープを貼りたくない場合は、丸穴のエッジをカッターナイフの背などで糸面取りしてもOKです。糸面取りについては、「アクリル　糸面取り」等で検索すると情報が得られると思います。

その場合トラックボールモジュールの角度がずれやすくなるので、気になるようでしたらトラックボールモジュールの裏側に両面テープ等を貼り、ボトムプレートに固定すると良いです。

# トッププレートをM2x6mmスペーサーへM2x4mmねじでねじ止め

画像の様に、トッププレートの丸穴にトラックボールモジュールを保護テープがずれないよう気を付けながら取付けた後に、トッププレートをM2x6mmスペーサー2つへM2x4mmねじ2本でねじ止めします。

<img width="600" alt="トッププレート取付後" src="https://user-images.githubusercontent.com/54104281/91308385-2f4a8d80-e7ea-11ea-88bf-45d6825b3c60.png">

取付が完了したら、トラックボールモジュールの取付は完了です。














 







